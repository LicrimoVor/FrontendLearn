"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[2030],{"./src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dark:function(){return Dark},Light:function(){return Light},Red:function(){return Red},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return ArticleDetailPage_stories}});var ThemeContext=__webpack_require__("./src/shared/lib/context/ThemeContext/index.ts"),storeDecorator=__webpack_require__("./src/shared/config/storybook/storeDecorator/index.ts"),themeDecorator=__webpack_require__("./src/shared/config/storybook/themeDecorator/index.ts"),testing=__webpack_require__("./src/entities/Article/testing.ts"),User_testing=__webpack_require__("./src/entities/User/testing.ts"),Comment_testing=__webpack_require__("./src/entities/Comment/testing.ts"),react=__webpack_require__("./node_modules/react/index.js"),react_router=__webpack_require__("./node_modules/react-router/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),Stack=__webpack_require__("./src/shared/ui/Stack/index.ts"),Article=__webpack_require__("./src/entities/Article/index.ts");const ArticleRecommendAsync=(0,react.lazy)((()=>__webpack_require__.e(8539).then(__webpack_require__.bind(__webpack_require__,"./src/features/Article/ArticleRecommend/ui/ArticleRecommend.tsx"))));var ArticleCommentForm=__webpack_require__("./src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.tsx");const ArticleRatingAsync=(0,react.lazy)((()=>Promise.all([__webpack_require__.e(997),__webpack_require__.e(4677)]).then(__webpack_require__.bind(__webpack_require__,"./src/features/Article/ArticleRating/ui/ArticleRating.tsx"))));var Page=__webpack_require__("./src/widgets/Page/index.ts"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),Button=__webpack_require__("./src/shared/ui/Button/index.ts"),route=__webpack_require__("./src/shared/const/route.ts"),reselect_es=__webpack_require__("./node_modules/reselect/es/index.js"),User=__webpack_require__("./src/entities/User/index.ts");const getArticleCanEdit=(0,reselect_es.P1)(Article.o4,User.m5,((article,user)=>!(!article||!user)&&article.user.id===user.id));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ArticleDetailPageHeader=(0,react.memo)((props=>{const{className:className}=props,{t:t}=(0,useTranslation.$)("article-detail"),navigate=(0,react_router.s0)(),canEdit=(0,es.v9)(getArticleCanEdit),article=(0,es.v9)(Article.o4),onBackToList=(0,react.useCallback)((()=>{navigate((0,route.k7)())}),[navigate]),onEditArticle=(0,react.useCallback)((()=>{article&&navigate((0,route.mK)(article?.id))}),[navigate,article]);return(0,jsx_runtime.jsxs)(Stack.U,{className:(0,classNames.A)("",{},[className]),justify:"spaceBetween",max:!0,children:[(0,jsx_runtime.jsx)(Button.zx,{onClick:onBackToList,children:t("ReturnToList")}),canEdit&&(0,jsx_runtime.jsx)(Button.zx,{onClick:onEditArticle,children:t("Edit")})]})}));try{ArticleDetailPageHeader.displayName="ArticleDetailPageHeader",ArticleDetailPageHeader.__docgenInfo={description:"Хедер для страницы с детальным просмотром статьи",displayName:"ArticleDetailPageHeader",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Article/ArticleDetailPage/ui/ArticleDetailPageHeader/ArticleDetailPageHeader.tsx#ArticleDetailPageHeader"]={docgenInfo:ArticleDetailPageHeader.__docgenInfo,name:"ArticleDetailPageHeader",path:"src/pages/Article/ArticleDetailPage/ui/ArticleDetailPageHeader/ArticleDetailPageHeader.tsx#ArticleDetailPageHeader"})}catch(__react_docgen_typescript_loader_error){}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticleDetailPage_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticleDetailPage_module.Z,options);var ArticleDetailPage_ArticleDetailPage_module=ArticleDetailPage_module.Z&&ArticleDetailPage_module.Z.locals?ArticleDetailPage_module.Z.locals:void 0;const ArticleDetailPage=()=>{const{t:t}=(0,useTranslation.$)("article-detail");let{id:id}=(0,react_router.UO)();return id="1",id?(0,jsx_runtime.jsx)(Page.T,{className:ArticleDetailPage_ArticleDetailPage_module.ArticleDetailPage,children:(0,jsx_runtime.jsxs)(Stack.g,{gap:32,max:!0,children:[(0,jsx_runtime.jsx)(ArticleDetailPageHeader,{}),(0,jsx_runtime.jsx)(Article.Vc,{articleId:id}),(0,jsx_runtime.jsx)(ArticleRatingAsync,{articleId:id,className:ArticleDetailPage_ArticleDetailPage_module.rating}),(0,jsx_runtime.jsx)(ArticleCommentForm.t,{articleId:id}),(0,jsx_runtime.jsx)(ArticleRecommendAsync,{})]})}):(0,jsx_runtime.jsx)("div",{className:ArticleDetailPage_ArticleDetailPage_module.ArticleDetailPage,children:t("ArticleNotFound")})};ArticleDetailPage.displayName="ArticleDetailPage";var ArticleDetailPage_ArticleDetailPage=(0,react.memo)(ArticleDetailPage);try{ArticleDetailPage.displayName="ArticleDetailPage",ArticleDetailPage.__docgenInfo={description:"",displayName:"ArticleDetailPage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.tsx#ArticleDetailPage"]={docgenInfo:ArticleDetailPage.__docgenInfo,name:"ArticleDetailPage",path:"src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.tsx#ArticleDetailPage"})}catch(__react_docgen_typescript_loader_error){}var ArticleDetailPage_stories={title:"pages/Article/ArticleDetailPage",component:ArticleDetailPage_ArticleDetailPage,decorators:[(0,storeDecorator.Y)({articleDetail:{data:testing.b},articleComments:{ids:[1,2,3],entities:{1:Comment_testing.K,2:Comment_testing.K,3:Comment_testing.K}},user:{authData:User_testing.C,_inited:!0}})],parameters:{mockData:[{url:"http://testapi.ru/articles?_limit=5",method:"GET",status:200,response:[testing.b,testing.b,testing.b,testing.b]}]}};const Light={decorators:[(0,themeDecorator.W)(ThemeContext.Q.LIGHT)]},Dark={decorators:[(0,themeDecorator.W)(ThemeContext.Q.DARK)]},Red={decorators:[(0,themeDecorator.W)(ThemeContext.Q.RED)]};Light.parameters={...Light.parameters,docs:{...Light.parameters?.docs,source:{originalSource:"{\n  decorators: [themeDecorator(Theme.LIGHT)]\n}",...Light.parameters?.docs?.source}}},Dark.parameters={...Dark.parameters,docs:{...Dark.parameters?.docs,source:{originalSource:"{\n  decorators: [themeDecorator(Theme.DARK)]\n}",...Dark.parameters?.docs?.source}}},Red.parameters={...Red.parameters,docs:{...Red.parameters?.docs,source:{originalSource:"{\n  decorators: [themeDecorator(Theme.RED)]\n}",...Red.parameters?.docs?.source}}};const __namedExportsOrder=["Light","Dark","Red"]},"./src/entities/Comment/ui/CommentCard/CommentCard.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return CommentCard}});var react=__webpack_require__("./node_modules/react/index.js"),route=__webpack_require__("./src/shared/const/route.ts"),classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),AppLink=__webpack_require__("./src/shared/ui/AppLink/index.ts"),Avatar=__webpack_require__("./src/shared/ui/Avatar/index.ts"),Skeleton=__webpack_require__("./src/shared/ui/Skeleton/index.ts"),Text=__webpack_require__("./src/shared/ui/Text/index.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),CommentCard_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Comment/ui/CommentCard/CommentCard.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(CommentCard_module.Z,options);var CommentCard_CommentCard_module=CommentCard_module.Z&&CommentCard_module.Z.locals?CommentCard_module.Z.locals:void 0,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CommentCard=(0,react.memo)((props=>{const{className:className,comment:comment,isLoading:isLoading}=props;return isLoading?(0,jsx_runtime.jsxs)("div",{className:(0,classNames.A)(CommentCard_CommentCard_module.CommentCard,{},[className,CommentCard_CommentCard_module.loading]),children:[(0,jsx_runtime.jsxs)("div",{className:CommentCard_CommentCard_module.header,children:[(0,jsx_runtime.jsx)(Skeleton.O,{width:30,height:30,border:"50%"}),(0,jsx_runtime.jsx)(Skeleton.O,{width:100,height:15,className:CommentCard_CommentCard_module.username})]}),(0,jsx_runtime.jsx)(Skeleton.O,{width:"100%",height:50,className:CommentCard_CommentCard_module.text})]}):comment?(0,jsx_runtime.jsxs)("div",{className:(0,classNames.A)(CommentCard_CommentCard_module.CommentCard,{},[className]),children:[(0,jsx_runtime.jsxs)(AppLink.F,{className:CommentCard_CommentCard_module.header,to:(0,route.CJ)(comment.user.id),children:[comment.user?.avatar?(0,jsx_runtime.jsx)(Avatar.q,{size:30,src:comment.user.avatar}):null,(0,jsx_runtime.jsx)(Text.xv,{title:comment.user.username,className:CommentCard_CommentCard_module.username})]}),(0,jsx_runtime.jsx)(Text.xv,{text:comment.text,className:CommentCard_CommentCard_module.text})]}):null}));try{CommentCard.displayName="CommentCard",CommentCard.__docgenInfo={description:"Докстринг",displayName:"CommentCard",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},comment:{defaultValue:null,description:"",name:"comment",required:!1,type:{name:"Comment"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/Comment/ui/CommentCard/CommentCard.tsx#CommentCard"]={docgenInfo:CommentCard.__docgenInfo,name:"CommentCard",path:"src/entities/Comment/ui/CommentCard/CommentCard.tsx#CommentCard"})}catch(__react_docgen_typescript_loader_error){}},"./src/entities/Comment/ui/CommentList/CommentList.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{$:function(){return CommentList}});var react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),Stack=__webpack_require__("./src/shared/ui/Stack/index.ts"),Text=__webpack_require__("./src/shared/ui/Text/index.ts"),CommentCard=__webpack_require__("./src/entities/Comment/ui/CommentCard/CommentCard.tsx"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),CommentList_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Comment/ui/CommentList/CommentList.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(CommentList_module.Z,options);var CommentList_CommentList_module=CommentList_module.Z&&CommentList_module.Z.locals?CommentList_module.Z.locals:void 0,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CommentList=(0,react.memo)((props=>{const{className:className,comments:comments,isLoading:isLoading}=props,{t:t}=(0,useTranslation.$)();return isLoading?(0,jsx_runtime.jsxs)(Stack.g,{max:!0,className:(0,classNames.A)("",{},[className]),children:[(0,jsx_runtime.jsx)(CommentCard.p,{isLoading:!0,className:CommentList_CommentList_module.comment}),(0,jsx_runtime.jsx)(CommentCard.p,{isLoading:!0,className:CommentList_CommentList_module.comment}),(0,jsx_runtime.jsx)(CommentCard.p,{isLoading:!0,className:CommentList_CommentList_module.comment})]}):(0,jsx_runtime.jsx)(Stack.g,{max:!0,className:(0,classNames.A)("",{},[className]),children:comments?.length?comments.map((comment=>(0,jsx_runtime.jsx)(CommentCard.p,{comment:comment,isLoading:isLoading,className:CommentList_CommentList_module.comment},comment.text))):(0,jsx_runtime.jsx)(Text.xv,{text:t("There are no comments")})})}));try{CommentList.displayName="CommentList",CommentList.__docgenInfo={description:"Список комментариев",displayName:"CommentList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},comments:{defaultValue:null,description:"",name:"comments",required:!1,type:{name:"Comment[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/Comment/ui/CommentList/CommentList.tsx#CommentList"]={docgenInfo:CommentList.__docgenInfo,name:"CommentList",path:"src/entities/Comment/ui/CommentList/CommentList.tsx#CommentList"})}catch(__react_docgen_typescript_loader_error){}},"./src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{t:function(){return ArticleCommentForm}});var react=__webpack_require__("./node_modules/react/index.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),useAppDispatch=__webpack_require__("./src/shared/lib/hooks/useAppDispatch/index.ts"),Text=__webpack_require__("./src/shared/ui/Text/index.ts"),DynamicModuleLoader=__webpack_require__("./src/shared/lib/components/DynamicModuleLoader/index.ts"),Stack=__webpack_require__("./src/shared/ui/Stack/index.ts"),userInitialEffect=__webpack_require__("./src/shared/lib/hooks/userInitialEffect/index.ts");const CreateCommentFormAsync=(0,react.lazy)((()=>__webpack_require__.e(442).then(__webpack_require__.bind(__webpack_require__,"./src/entities/Comment/ui/CreateCommentForm/CreateCommentForm.tsx"))));try{CreateCommentFormAsync.displayName="CreateCommentFormAsync",CreateCommentFormAsync.__docgenInfo={description:"",displayName:"CreateCommentFormAsync",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onCommentSend:{defaultValue:null,description:"",name:"onCommentSend",required:!0,type:{name:"(text: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/entities/Comment/ui/CreateCommentForm/CreateCommentForm.async.tsx#CreateCommentFormAsync"]={docgenInfo:CreateCommentFormAsync.__docgenInfo,name:"CreateCommentFormAsync",path:"src/entities/Comment/ui/CreateCommentForm/CreateCommentForm.async.tsx#CreateCommentFormAsync"})}catch(__react_docgen_typescript_loader_error){}var CommentList=__webpack_require__("./src/entities/Comment/ui/CommentList/CommentList.tsx");const getArticleCommentIsLoading=state=>state.articleComments?.isLoading,getArticleCommentError=state=>state.articleComments?.error;var articleCommentsSlice=__webpack_require__("./src/features/Article/ArticleCommentForm/model/slice/articleCommentsSlice.ts"),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),User=__webpack_require__("./src/entities/User/index.ts"),fetchCommentsByAcrticleId=__webpack_require__("./src/features/Article/ArticleCommentForm/model/services/fetchCommentsByAcrticleId/fetchCommentsByAcrticleId.ts");const sendCommentForArticle=(0,redux_toolkit_esm.hg)("articleDetail/sendCommentForArticle",(async(props,thunkApi)=>{const{dispatch:dispatch,extra:extra,rejectWithValue:rejectWithValue,getState:getState}=thunkApi,{text:text,articleId:articleId}=props,userData=(0,User.m5)(getState());if(!(userData||text||articleId))return rejectWithValue("no data");try{const response=await extra.api.post("/comments",{articleId:articleId,text:text,userId:userData.id});if(!response.data)throw new Error;return dispatch((0,fetchCommentsByAcrticleId.X)(articleId)),response.data}catch{return rejectWithValue("error")}}));var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ArticleCommentForm_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ArticleCommentForm_module.Z,options);var ui_ArticleCommentForm_module=ArticleCommentForm_module.Z&&ArticleCommentForm_module.Z.locals?ArticleCommentForm_module.Z.locals:void 0,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const redusers={articleComments:articleCommentsSlice.lw},ArticleCommentForm=(0,react.memo)((props=>{const{className:className,articleId:articleId}=props,dispatch=(0,useAppDispatch.T)(),comments=(0,es.v9)(articleCommentsSlice.lk.selectAll),isLoading=(0,es.v9)(getArticleCommentIsLoading),error=(0,es.v9)(getArticleCommentError),{t:t}=(0,useTranslation.$)("article-detail"),onCommentSend=(0,react.useCallback)((text=>{dispatch(sendCommentForArticle({text:text,articleId:articleId}))}),[dispatch,articleId]);return(0,userInitialEffect.Q)((()=>{dispatch((0,fetchCommentsByAcrticleId.X)(articleId))})),error?(0,jsx_runtime.jsx)(Text.xv,{text:t("Error")}):(0,jsx_runtime.jsx)(DynamicModuleLoader.W,{reducers:redusers,children:(0,jsx_runtime.jsxs)(Stack.g,{max:!0,gap:8,className:(0,classNames.A)("",{},[className]),children:[(0,jsx_runtime.jsx)(Text.xv,{size:Text.yH.L,title:t("Comments"),className:ui_ArticleCommentForm_module.commentTitle}),(0,jsx_runtime.jsx)(CreateCommentFormAsync,{onCommentSend:onCommentSend}),(0,jsx_runtime.jsx)(CommentList.$,{isLoading:isLoading,comments:comments})]})})}));try{ArticleCommentForm.displayName="ArticleCommentForm",ArticleCommentForm.__docgenInfo={description:"Форма с комментариями статьи",displayName:"ArticleCommentForm",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},articleId:{defaultValue:null,description:"",name:"articleId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.tsx#ArticleCommentForm"]={docgenInfo:ArticleCommentForm.__docgenInfo,name:"ArticleCommentForm",path:"src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.tsx#ArticleCommentForm"})}catch(__react_docgen_typescript_loader_error){}},"./src/widgets/Page/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{T:function(){return Page}});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/index.js"),classNames=__webpack_require__("./src/shared/lib/classNames/classNames.ts"),useAppDispatch=__webpack_require__("./src/shared/lib/hooks/useAppDispatch/index.ts");var userInitialEffect=__webpack_require__("./src/shared/lib/hooks/userInitialEffect/index.ts");var ScrollSave=__webpack_require__("./src/features/ScrollSave/index.ts"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),Page_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/widgets/Page/ui/Page.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Page_module.Z,options);var ui_Page_module=Page_module.Z&&Page_module.Z.locals?Page_module.Z.locals:void 0,jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Page=(0,react.memo)((props=>{const{className:className,children:children,onScrollEnd:onScrollEnd}=props,wrapperRef=(0,react.useRef)(),triggerRef=(0,react.useRef)(),dispatch=(0,useAppDispatch.T)(),{pathname:pathname}=(0,react_router.TH)(),scrollPosition=(0,es.v9)((state=>(0,ScrollSave.NG)(state,pathname)));!function useInfiniteScroll(props){const{callback:callback,triggerRef:triggerRef,wrapperRef:wrapperRef}=props;(0,react.useEffect)((()=>{let observer=null;const wrapperElement=wrapperRef.current,triggerElement=triggerRef.current;return void 0!==callback&&(observer=new IntersectionObserver((([entry])=>{entry.isIntersecting&&callback()}),{root:wrapperElement,rootMargin:"20px 45px 20px 45px",threshold:1}),observer.observe(triggerElement)),()=>{observer&&observer.unobserve(triggerElement)}}),[triggerRef,wrapperRef,callback])}({triggerRef:triggerRef,wrapperRef:wrapperRef,callback:onScrollEnd}),(0,userInitialEffect.Q)((()=>{wrapperRef.current.scrollTop=scrollPosition}));const onScroll=function useThrottle(callback,delay){const throttleRef=(0,react.useRef)(!1);return(0,react.useCallback)(((...args)=>{throttleRef.current||(callback(...args),throttleRef.current=!0,setTimeout((()=>{throttleRef.current=!1}),delay))}),[delay,callback,throttleRef])}((e=>{dispatch(ScrollSave.OF.setScrollPosition({path:pathname,position:e.currentTarget.scrollTop}))}),500);return(0,jsx_runtime.jsxs)("main",{ref:wrapperRef,onScroll:onScroll,className:(0,classNames.A)(ui_Page_module.Page,{},[className]),id:"PAGE_ID","data-testid":props["data-testid"]??"Page",children:[children,onScrollEnd?(0,jsx_runtime.jsx)("div",{className:ui_Page_module.trigger,ref:triggerRef}):null]})}));try{Page.displayName="Page",Page.__docgenInfo={description:"Обертка для страницы.",displayName:"Page",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onScrollEnd:{defaultValue:null,description:"",name:"onScrollEnd",required:!1,type:{name:"(() => void)"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/widgets/Page/ui/Page.tsx#Page"]={docgenInfo:Page.__docgenInfo,name:"Page",path:"src/widgets/Page/ui/Page.tsx#Page"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Comment/ui/CommentCard/CommentCard.module.scss":function(module,__webpack_exports__,__webpack_require__){var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-entities-Comment-ui-CommentCard-CommentCard-module__CommentCard{padding:10px;border:1px solid var(--primary-color)}.src-entities-Comment-ui-CommentCard-CommentCard-module__header{display:flex;align-items:center}.src-entities-Comment-ui-CommentCard-CommentCard-module__text{margin-top:10px}.src-entities-Comment-ui-CommentCard-CommentCard-module__username{margin-left:10px}.src-entities-Comment-ui-CommentCard-CommentCard-module__loading{border:none}","",{version:3,sources:["webpack://./src/entities/Comment/ui/CommentCard/CommentCard.module.scss"],names:[],mappings:"AAAA,qEACI,YAAA,CACA,qCAAA,CAGJ,gEACI,YAAA,CACA,kBAAA,CAGJ,8DACI,eAAA,CAGJ,kEACI,gBAAA,CAGJ,iEACI,WAAA",sourcesContent:[".CommentCard {\n    padding: 10px;\n    border: 1px solid var(--primary-color);\n}\n\n.header {\n    display: flex;\n    align-items: center;\n}\n\n.text {\n    margin-top: 10px;\n}\n\n.username {\n    margin-left: 10px;\n}\n\n.loading {\n    border: none;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={CommentCard:"src-entities-Comment-ui-CommentCard-CommentCard-module__CommentCard",header:"src-entities-Comment-ui-CommentCard-CommentCard-module__header",text:"src-entities-Comment-ui-CommentCard-CommentCard-module__text",username:"src-entities-Comment-ui-CommentCard-CommentCard-module__username",loading:"src-entities-Comment-ui-CommentCard-CommentCard-module__loading"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/entities/Comment/ui/CommentList/CommentList.module.scss":function(module,__webpack_exports__,__webpack_require__){var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-entities-Comment-ui-CommentList-CommentList-module__comment{margin-top:10px;width:100%}","",{version:3,sources:["webpack://./src/entities/Comment/ui/CommentList/CommentList.module.scss"],names:[],mappings:"AAAA,iEACI,eAAA,CACA,UAAA",sourcesContent:[".comment {\n    margin-top: 10px;\n    width: 100%;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={comment:"src-entities-Comment-ui-CommentList-CommentList-module__comment"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.module.scss":function(module,__webpack_exports__,__webpack_require__){var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-features-Article-ArticleCommentForm-ui-ArticleCommentForm-module__commentTitle{margin-top:20px}","",{version:3,sources:["webpack://./src/features/Article/ArticleCommentForm/ui/ArticleCommentForm.module.scss"],names:[],mappings:"AAAA,oFACI,eAAA",sourcesContent:[".commentTitle {\n    margin-top: 20px;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={commentTitle:"src-features-Article-ArticleCommentForm-ui-ArticleCommentForm-module__commentTitle"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.module.scss":function(module,__webpack_exports__,__webpack_require__){var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__ArticleDetailPage{min-height:100%}.src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__commentTitle{margin-top:20px}.src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__recommendArticles{height:300px;margin-top:20px;flex-wrap:nowrap;overflow-y:hidden;overflow-x:auto}.src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__rating{background:var(--card-bg);padding:15px 40px;border-radius:14px;align-self:center;justify-content:center}","",{version:3,sources:["webpack://./src/pages/Article/ArticleDetailPage/ui/ArticleDetailPage/ArticleDetailPage.module.scss"],names:[],mappings:"AAAA,sGACI,eAAA,CAGJ,iGACI,eAAA,CAGJ,sGACI,YAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,eAAA,CAGJ,2FACI,yBAAA,CACA,iBAAA,CACA,kBAAA,CACA,iBAAA,CACA,sBAAA",sourcesContent:[".ArticleDetailPage {\n    min-height: 100%;\n}\n\n.commentTitle {\n    margin-top: 20px;\n}\n\n.recommendArticles {\n    height: 300px;\n    margin-top: 20px;\n    flex-wrap: nowrap;\n    overflow-y: hidden;\n    overflow-x: auto;\n}\n\n.rating {\n    background: var(--card-bg);\n    padding: 15px 40px;\n    border-radius: 14px;\n    align-self: center;\n    justify-content: center;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={ArticleDetailPage:"src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__ArticleDetailPage",commentTitle:"src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__commentTitle",recommendArticles:"src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__recommendArticles",rating:"src-pages-Article-ArticleDetailPage-ui-ArticleDetailPage-ArticleDetailPage-module__rating"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!./node_modules/sass-loader/dist/cjs.js!./src/widgets/Page/ui/Page.module.scss":function(module,__webpack_exports__,__webpack_require__){var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".src-widgets-Page-ui-Page-module__Page{flex-grow:1;padding:20px 45px;height:calc(100vh - var(--navbar-height));overflow-y:auto;flex-shrink:100}.src-widgets-Page-ui-Page-module__trigger{height:20px;margin:10px}","",{version:3,sources:["webpack://./src/widgets/Page/ui/Page.module.scss"],names:[],mappings:"AAAA,uCACI,WAAA,CACA,iBAAA,CACA,yCAAA,CACA,eAAA,CACA,eAAA,CAGJ,0CACI,WAAA,CACA,WAAA",sourcesContent:[".Page {\n    flex-grow: 1;\n    padding: 20px 45px;\n    height: calc(100vh - var(--navbar-height));\n    overflow-y: auto;\n    flex-shrink: 100;\n}\n\n.trigger {\n    height: 20px;\n    margin: 10px;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={Page:"src-widgets-Page-ui-Page-module__Page",trigger:"src-widgets-Page-ui-Page-module__trigger"},__webpack_exports__.Z=___CSS_LOADER_EXPORT___}}]);